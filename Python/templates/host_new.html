{% extends "base.html" %}
{% block content %}
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h4 class="mb-0">Créer un host</h4>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="{{ url_for('hosts_import_template') }}">Télécharger le modèle</a>
      <a class="btn btn-outline-primary" href="{{ url_for('hosts_import') }}">Importer CSV</a>
    </div>
  </div>

  <form method="post" class="col-12 col-lg-8">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Hostname *</label>
        <input name="hostname" class="form-control" required />
      </div>
      <div class="col-md-6">
        <label class="form-label">Adresse IP *</label>
        <input name="ip" class="form-control" placeholder="192.168.1.10" required />
      </div>
      <div class="col-md-4">
        <label class="form-label">Port</label>
        <input name="port" class="form-control" value="161" />
      </div>
      <div class="col-md-8">
        <label class="form-label">Description</label>
        <input name="description" class="form-control" />
      </div>

      <div class="col-md-6">
        <label class="form-label">Groupe</label>
        <div class="d-flex gap-2">
          <select name="group_id" class="form-select">
            <option value="">— Aucun —</option>
            {% for g in groups %}
              <option value="{{ g.id }}">{{ g.name }}</option>
            {% endfor %}
          </select>
          <a class="btn btn-outline-secondary" href="{{ url_for('group_new') }}">+ Nouveau</a>
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Template</label>
        <div class="d-flex gap-2">
          <select name="template_id" class="form-select">
            <option value="">— Aucun —</option>
            {% for t in templates %}
              <option value="{{ t.id }}">{{ t.name }}</option>
            {% endfor %}
          </select>
          <a class="btn btn-outline-secondary" href="{{ url_for('template_new') }}">+ Nouveau</a>
        </div>
      </div>

      <div class="col-12">
        <label class="form-label">Tags (séparés par des virgules)</label>
        <input name="tags" class="form-control" placeholder="prod, router, snmpv2" />
        <div class="form-text">
          Astuce : pour importer en masse, utilisez <em>Importer CSV</em> (colonnes :
          <code>hostname, description, group, ip, port, template, tags</code>).
        </div>
      </div>
    </div>

    <div class="mt-4">
      <button class="btn btn-primary" type="submit">Créer</button>
      <a class="btn btn-link" href="{{ url_for('admin') }}">Annuler</a>
    </div>
  </form>
{% endblock %}
