{% extends "base.html" %}
{% block content %}
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h4 class="mb-0">Créer un host</h4>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="{{ url_for('hosts_import_template') }}">Télécharger le modèle</a>
      <a class="btn btn-outline-primary" href="{{ url_for('hosts_import') }}">Importer CSV</a>
    </div>
  </div>

  <form method="post" class="col-12 col-lg-8">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Hostname *</label>
        <input name="hostname" class="form-control" required />
      </div>
      <div class="col-md-6">
        <label class="form-label">Adresse IP *</label>
        <input name="ip" class="form-control" placeholder="192.168.1.10" required />
      </div>

      <div class="col-md-4">
        <label class="form-label">Port</label>
        <input name="port" class="form-control" value="161" />
      </div>
      <div class="col-md-8">
        <label class="form-label">Description</label>
        <input name="description" class="form-control" />
      </div>

      <div class="col-md-6">
        <label class="form-label">Communauté SNMP *</label>
        <input name="snmp_community" class="form-control" value="public" required />
      </div>

      <div class="col-md-6">
        <label class="form-label">Groupe</label>
        <div class="d-flex gap-2">
          <select name="group_id" class="form-select">
            <option value="">— Aucun —</option>
            {% for g in groups %}
              <option value="{{ g.id }}">{{ g.name }}</option>
            {% endfor %}
          </select>
          <a class="btn btn-outline-secondary" href="{{ url_for('group_new') }}">+ Nouveau</a>
        </div>
      </div>

      <!-- Catégories SNMP (checkboxes) -->
      <div class="col-12">
        <label class="form-label">Catégories SNMP *</label>
        <div class="d-flex flex-wrap gap-4">
          {% for cat in ["system", "cpu", "ram", "storage", "interfaces"] %}
            <div class="form-check">              
              <input class="form-check-input" type="checkbox" name="snmp_categories" value="{{ cat }}" id="chk_{{ cat }}">
              <label class="form-check-label" for="chk_{{ cat }}">
                {{ cat|capitalize }}
              </label>
            </div>
          {% endfor %}
        </div>
        <div class="form-text">
          Cochez une ou plusieurs catégories (ex : System + RAM + Storage + Interfaces).
        </div>
      </div>

      <div class="col-12">
        <label class="form-label">Tags (séparés par des virgules)</label>
        <input name="tags" class="form-control" placeholder="prod, router, snmpv2" />
      </div>
    </div>

    <div class="mt-4">
      <button class="btn btn-primary" type="submit">Créer</button>
      <a class="btn btn-link" href="{{ url_for('admin') }}">Annuler</a>
    </div>
  </form>
{% endblock %}
